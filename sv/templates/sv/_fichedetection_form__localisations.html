<!-- Liste des localisations (pour tests e2e Playwright) -->
<input type="hidden" disabled data-testid="localisations" :value="JSON.stringify(localisations)">

<!-- Liste des localisations -->
<template x-for="(localisation, index) in localisations" :key="localisation.id">
    <div class="localisation-initiale">
        <div class="lieu-header">
            <p x-text="localisation.nomLocalisation" class="lieu-nom"></p>
            <ul class="fr-btns-group fr-btns-group--sm fr-btns-group--inline-reverse fr-btns-group--inline-lg">
                <li>
                    <button
                        type="button"
                        class="localisation-edit-btn fr-btn fr-btn--secondary fr-icon-edit-fill"
                        title="Modifier la localisation"
                        @click="fillLocalisationEditForm(localisation.id)"
                        data-fr-opened="false"
                        aria-controls="modal-add-edit-localisation"
                        :aria-describedby="'tooltip-edit-localisation-' + localisation.id">
                    </button>
                    <span
                        class="fr-tooltip fr-placement"
                        :id="'tooltip-edit-localisation-' + localisation.id"
                        role="tooltip"
                        aria-hidden="true">
                        Modifier la localisation
                    </span>
                </li>
                <li>
                    <button
                        type="button"
                        class="localisation-delete-btn fr-btn fr-btn--secondary fr-icon-delete-fill"
                        title="Supprimer la localisation"
                        @click="canDeleteLocalisation(localisation.id)"
                        :aria-describedby="'tooltip-delete-localisation-' + localisation.id">
                    </button>
                    <span
                        class="fr-tooltip fr-placement"
                        :id="'tooltip-delete-localisation-' + localisation.id"
                        role="tooltip"
                        aria-hidden="true">
                        Supprimer la localisation
                    </span>
                </li>
            </ul>
        </div>
        <p class="lieu-commune" x-text="localisation.commune"></p>
    </div>
</template>

<!-- Modal confirmation suppression localisation -->
<!-- bouton relié à la modal en display non -> https://github.com/GouvernementFR/dsfr/issues/728 -->
<button type="button" style="display: none;" data-fr-opened="false" aria-controls="fr-modal-cant-delete-localisation"></button>
<dialog aria-labelledby="fr-modal-cant-delete-localisation-title" id="fr-modal-cant-delete-localisation" class="fr-modal" role="dialog">
    <div class="fr-container fr-container--fluid fr-container-md">
        <div class="fr-grid-row fr-grid-row--center">
            <div class="fr-col-12 fr-col-md-8 fr-col-lg-6">
                <div class="fr-modal__body">
                    <div class="fr-modal__header">
                        <button type="button" class="fr-btn--close fr-btn" aria-controls="fr-modal-cant-delete-localisation">Fermer</button>
                    </div>
                    <div class="fr-modal__content">
                        <h1 id="fr-modal-cant-delete-localisation-title" class="fr-modal__title">Supprimer</h1>
                        <p>Souhaitez-vous réellement supprimer la localisation ?</p>
                        <div class="fr-btns-group fr-btns-group--left fr-btns-group--inline-lg">
                            <button type="button" class="fr-btn" @click="deleteLocalisation(localisationIdToDelete)">Supprimer</button>
                            <button type="button" class="fr-btn fr-btn--secondary" aria-controls="fr-modal-cant-delete-localisation">Annuler</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</dialog>

<!-- Modal suppression localisation impossible -->
<!-- bouton relié à la modal en display non -> https://github.com/GouvernementFR/dsfr/issues/728 -->
<button type="button" style="display: none;" data-fr-opened="false" aria-controls="fr-modal-suppression-localisation"></button>
<dialog aria-labelledby="fr-modal-suppression-localisation-title" id="fr-modal-suppression-localisation" class="fr-modal" role="dialog">
    <div class="fr-container fr-container--fluid fr-container-md">
        <div class="fr-grid-row fr-grid-row--center">
            <div class="fr-col-12 fr-col-md-8 fr-col-lg-6">
                <div class="fr-modal__body">
                    <div class="fr-modal__header">
                        <button type="button" class="fr-btn--close fr-btn" aria-controls="fr-modal-suppression-localisation">Fermer</button>
                    </div>
                    <div class="fr-modal__content">
                        <h1 id="fr-modal-suppression-localisation-title" class="fr-modal__title">
                            Suppression de la localisation impossible
                        </h1>
                        <p>Cette localisation est liée à un ou plusieurs prélèvements. <br>
                            Supprimez d'abord le(s) prélèvement(s) lié(s).
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</dialog>
